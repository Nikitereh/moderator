import{i as J,j as p,d as q,s as B,k as X,r as u,o as i,h as b,a as l,w as a,e as f,t as W,c as y,b as o,l as Y,m as z,_ as E,n as D,E as Z,q as G,f as x,v as U,x as M,F as A,p as ee,g as le,u as te}from"./index-DXpJVCvg.js";async function oe(){return{data:[{id:1,name:"IceCoffee",block1:23,block2:2,block3:34,block4:45,twin:11,all:677,result:655991,hasIcon:!0},{id:2,name:"KissMyWeapon",block1:45,block2:25,block3:11,block4:36,twin:32,all:548,result:450933},{id:2,name:"KissMyWeapon",block1:45,block2:25,block3:11,block4:36,twin:32,all:548,result:450933},{id:2,name:"KissMyWeapon",block1:45,block2:25,block3:11,block4:36,twin:32,all:548,result:450933},{id:2,name:"KissMyWeapon",block1:45,block2:25,block3:11,block4:36,twin:32,all:548,result:450933},{id:2,name:"KissMyWeapon",block1:45,block2:25,block3:11,block4:36,twin:32,all:548,result:450933},{id:2,name:"KissMyWeapon",block1:45,block2:25,block3:11,block4:36,twin:32,all:548,result:450933}]}.data}const H=J("table",()=>{const d=p(!1),e=p([]);return{isLoading:d,tableData:e,fetchTableData:async()=>{e.value=await oe()}}}),ae={class:"table-wrapper"},se={class:"table__cell-name"},ne=q({__name:"AppTable",setup(d){const{fetchTableData:e}=H(),{isLoading:m,tableData:v}=B(H());return X(async()=>{await e()}),(g,k)=>{const r=u("el-table-column"),h=u("el-icon"),_=u("el-table");return i(),b("div",ae,[l(_,{data:o(v),"row-class-name":"table__row",class:"table",border:"",style:{width:"100%"}},{default:a(()=>[l(r,{type:"index",width:"50",label:"№"}),l(r,{prop:"name",label:"Ник",width:"200"},{default:a(({row:c})=>[f("div",se,[f("span",null,W(c.name),1),c.hasIcon?(i(),y(h,{key:0,size:"large"},{default:a(()=>[l(o(Y))]),_:1})):z("",!0)])]),_:1}),l(r,{prop:"block1",label:"Баллы за заходы",width:"140"}),l(r,{prop:"twin",label:"Твины (кол-во)",width:"140"}),l(r,{prop:"block2",label:"Баллы за твинов",width:"140"}),l(r,{prop:"all",label:"Всего баллов",width:"140"}),l(r,{prop:"result",label:"Итог (адена)",width:"140"})]),_:1},8,["data"])])}}}),re=E(ne,[["__scopeId","data-v-130499b1"]]),L=J("form",()=>{const d=p(15),e=p({damagers:[],type:"valakas",twins:[],count_of_randoms:0,price_of_random:0,comment:""}),m=p([{id:1,name:"IceCoffee",count_of_twins:0,points:0},{id:2,name:"iichka",count_of_twins:0,points:0},{id:3,name:"KissMyWeapon",count_of_twins:0,points:0},{id:4,name:"Query",count_of_twins:0,points:0},{id:5,name:"Клюквенный",count_of_twins:0,points:0}]),v=p([]),g=p([]),k=p(""),r=p(""),h=D(()=>{const s=m.value.filter(w=>w.name.toLowerCase().includes(k.value.toLowerCase()));return s.length?s:m.value}),_=D(()=>{const s=m.value.filter(w=>w.name.toLowerCase().includes(r.value.toLowerCase()));return s.length?s:m.value}),c=p(!1),C=p(!1),$=()=>{let s;return e.value.twins.length?s=e.value.twins.reduce((w,I)=>w+I.count_of_twins,0):s=0,s},V=D(()=>e.value.damagers.length+$()+e.value.count_of_randoms),F=D(()=>d.value===V.value);return{users:m,damagers:v,twins:g,form:e,damagersSearch:k,twinsSearch:r,isDisabled:c,isAvailableCount:F,allMembersCount:V,filteredDamagers:h,filteredTwinks:_,isVisible:C,resetForm:()=>{e.value.twins.forEach(s=>s.count_of_twins=0),e.value.damagers.forEach(s=>s.points=0),e.value.damagers=[],e.value.type="valakas",e.value.twins=[],e.value.count_of_randoms=0,e.value.price_of_random=0,e.value.comment="",k.value="",r.value="",v.value=[],g.value=[]},toggleForm:()=>{C.value=!C.value},submitForm:()=>{if(!F.value){Z({type:"error",message:`Общее число участников рейда: ${V.value} из ${d.value}`});return}}}}),N=d=>(ee("data-v-a15259f4"),d=d(),le(),d),ie=N(()=>f("p",{class:"form__title"},"Добавить заход",-1)),ue={key:0,class:"form__item-sublist"},de={class:"form__item-sub-name"},ce={style:{"line-height":"20px"}},me=N(()=>f("span",{style:{"line-height":"20px","margin-right":"8px"}},"баллов",-1)),_e={key:0,class:"form__item-sublist"},pe={class:"form__item-sub-name"},fe={style:{"line-height":"20px"}},be=N(()=>f("span",{style:{"line-height":"20px","margin-right":"8px"}},"количество",-1)),ve={class:"form__controls"},ge=q({__name:"AppForm",setup(d){const{form:e,isDisabled:m,users:v,twinsSearch:g,damagersSearch:k,filteredDamagers:r,filteredTwinks:h,damagers:_,twins:c}=B(L()),{submitForm:C,resetForm:$}=L(),V=(F,n)=>F.filter(S=>n.includes(S.id));return G(c,()=>{e.value.twins=V(v.value,c.value)},{deep:!0}),G(_,()=>{e.value.damagers=V(v.value,_.value)},{deep:!0}),(F,n)=>{const S=u("el-radio"),R=u("el-radio-group"),s=u("el-form-item"),w=u("el-input"),I=u("el-option"),j=u("el-select"),T=u("el-input-number"),Q=u("el-button"),O=u("el-scrollbar"),P=u("el-form");return i(),y(P,{model:o(e),ref:"ruleFormRef",class:"form",size:"large"},{default:a(()=>[ie,l(O,{"max-height":"600px",class:"form__content"},{default:a(()=>[l(s,{label:"Активность",required:""},{default:a(()=>[l(R,{modelValue:o(e).type,"onUpdate:modelValue":n[0]||(n[0]=t=>o(e).type=t),size:"large"},{default:a(()=>[l(S,{value:"valakas",size:"large"},{default:a(()=>[x("Валакас")]),_:1}),l(S,{value:"frintezza"},{default:a(()=>[x("Фринтеза")]),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"Основные персонажи",required:""},{default:a(()=>[l(j,{modelValue:o(_),"onUpdate:modelValue":n[2]||(n[2]=t=>U(_)?_.value=t:null),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"Select",class:"form__select"},{default:a(()=>[l(w,{modelValue:o(k),"onUpdate:modelValue":n[1]||(n[1]=t=>U(k)?k.value=t:null),size:"default",class:"form__input-search",placeholder:"Поиск"},null,8,["modelValue"]),(i(!0),b(A,null,M(o(r),t=>(i(),y(I,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),o(e).damagers.length?(i(),b("div",ue,[(i(!0),b(A,null,M(o(e).damagers,t=>(i(),b("div",{key:t.id,class:"form__item-sub"},[f("div",de,W(t.name),1),f("div",ce,[me,l(T,{modelValue:t.points,"onUpdate:modelValue":K=>t.points=K,step:5,size:"small",min:0,max:100},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):z("",!0)]),_:1}),l(s,{label:"Твины",required:""},{default:a(()=>[l(j,{modelValue:o(c),"onUpdate:modelValue":n[4]||(n[4]=t=>U(c)?c.value=t:null),multiple:"","collapse-tags":"","collapse-tags-tooltip":"","max-collapse-tags":3,placeholder:"Select",class:"form__select"},{default:a(()=>[l(w,{modelValue:o(g),"onUpdate:modelValue":n[3]||(n[3]=t=>U(g)?g.value=t:null),size:"default",class:"form__input-search",placeholder:"Поиск"},null,8,["modelValue"]),(i(!0),b(A,null,M(o(h),t=>(i(),y(I,{key:t.id,value:t.id,label:t.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue"]),o(e).twins.length?(i(),b("div",_e,[(i(!0),b(A,null,M(o(e).twins,t=>(i(),b("div",{key:t.id,class:"form__item-sub"},[f("div",pe,W(t.name),1),f("div",fe,[be,l(T,{modelValue:t.count_of_twins,"onUpdate:modelValue":K=>t.count_of_twins=K,size:"small",min:0,max:14},null,8,["modelValue","onUpdate:modelValue"])])]))),128))])):z("",!0)]),_:1}),l(s,{label:"Количество рандомов"},{default:a(()=>[l(T,{modelValue:o(e).count_of_randoms,"onUpdate:modelValue":n[5]||(n[5]=t=>o(e).count_of_randoms=t),min:0,max:14,size:"default"},null,8,["modelValue"])]),_:1}),o(e).count_of_randoms>0?(i(),y(s,{key:0,label:"Стоимость одного рандома (кк)"},{default:a(()=>[l(T,{modelValue:o(e).price_of_random,"onUpdate:modelValue":n[6]||(n[6]=t=>o(e).price_of_random=t),min:0,max:99,size:"default"},null,8,["modelValue"])]),_:1})):z("",!0),l(s,null,{default:a(()=>[l(w,{modelValue:o(e).comment,"onUpdate:modelValue":n[7]||(n[7]=t=>o(e).comment=t),rows:3,type:"textarea",placeholder:"Комментарий (не обязательно)"},null,8,["modelValue"])]),_:1}),l(s,null,{default:a(()=>[f("div",ve,[l(Q,{onClick:o($)},{default:a(()=>[x("Отмена")]),_:1},8,["onClick"]),l(Q,{type:"primary",disabled:o(m),onClick:o(C)},{default:a(()=>[x(" Подвтердить ")]),_:1},8,["disabled","onClick"])])]),_:1})]),_:1})]),_:1},8,["model"])}}}),ke=E(ge,[["__scopeId","data-v-a15259f4"]]),we={class:"container"},he={class:"controls"},Ve=q({__name:"MainView",setup(d){const{isVisible:e}=B(L()),{isLoggedIn:m}=te(),{toggleForm:v,resetForm:g}=L();return(k,r)=>{const h=u("el-button"),_=u("el-dialog");return i(),b("main",we,[l(re),f("div",he,[l(h,{type:"primary",onClick:o(v)},{default:a(()=>[x(" Добавить заход ")]),_:1},8,["onClick"]),o(m)?(i(),y(h,{key:0,type:"primary"},{default:a(()=>[x(" Редактировать ")]),_:1})):z("",!0)]),l(_,{modelValue:o(e),"onUpdate:modelValue":r[0]||(r[0]=c=>U(e)?e.value=c:null),onClosed:o(g)},{default:a(()=>[l(ke)]),_:1},8,["modelValue","onClosed"])])}}}),xe=E(Ve,[["__scopeId","data-v-ef5b0abf"]]);export{xe as default};
